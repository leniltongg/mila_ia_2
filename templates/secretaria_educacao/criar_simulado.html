{% extends "secretaria_educacao/base_secretaria_educacao.html" %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <!-- Formulário e Resumo do Simulado -->
        <div class="col-md-3">
            <!-- Dados do Simulado -->
            <div class="card">
                <div class="card-header">
                    <h5><i class="bi bi-file-earmark-text me-2"></i>Dados do Simulado</h5>
                </div>
                <div class="card-body">
                    <form id="simulado-form">
                        <input type="hidden" id="simulado_id" name="simulado_id" value="{{ simulado.id if simulado else '' }}">
                        <div class="mb-3">
                            <label for="serie_id" class="form-label">Série</label>
                            <select class="form-select" id="serie_id" name="serie_id" required>
                                <option value="">Selecione...</option>
                                {% for serie in series %}
                                <option value="{{ serie.id }}" {% if simulado and simulado.serie_id == serie.id %}selected{% endif %}>{{ serie.nome }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="mes_id" class="form-label">Mês</label>
                            <select class="form-select" id="mes_id" name="mes_id" required>
                                <option value="">Selecione...</option>
                                {% for mes in meses %}
                                <option value="{{ mes.id }}" {% if simulado and simulado.mes_id == mes.id %}selected{% endif %}>{{ mes.nome }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="disciplina_id" class="form-label">Disciplina</label>
                            <select class="form-select" id="disciplina_id" name="disciplina_id" required>
                                <option value="">Selecione...</option>
                                {% for disciplina in disciplinas %}
                                <option value="{{ disciplina.id }}" {% if simulado and simulado.disciplina_id == disciplina.id %}selected{% endif %}>{{ disciplina.nome }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <button type="button" class="btn btn-primary w-100 mb-2" onclick="salvarSimulado()">
                            <i class="bi bi-save me-2"></i>Salvar Simulado
                        </button>

                        <button type="button" class="btn btn-success w-100" onclick="abrirModalGeracaoAutomatica()">
                            <i class="bi bi-magic me-2"></i>Gerar Automaticamente
                        </button>
                    </form>
                </div>
            </div>

            <!-- Resumo do Simulado -->
            <div class="card">
                <div class="card-header">
                    <h5><i class="bi bi-list-check me-2"></i>Resumo do Simulado</h5>
                </div>
                <div class="card-body">
                    <div class="resumo-simulado">
                        <div class="resumo-item">
                            <span>Total de Questões:</span>
                            <strong id="total-questoes">0</strong>
                        </div>
                        <div class="resumo-item">
                            <span>Série:</span>
                            <strong id="resumo-serie">-</strong>
                        </div>
                        <div class="resumo-item">
                            <span>Disciplina:</span>
                            <strong id="resumo-disciplina">-</strong>
                        </div>
                        <div class="resumo-item">
                            <span>Mês:</span>
                            <strong id="resumo-mes">-</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Banco de Questões -->
        <div class="col-md-5">
            <div class="card">
                <div class="card-header">
                    <h5><i class="bi bi-journal-text me-2"></i>Banco de Questões</h5>
                </div>
                <div class="card-body">
                    <!-- Filtros -->
                    <form id="pesquisa-form" class="mb-3">
                        <div class="row g-2">
                            <div class="col-md-4">
                                <label for="filtro-serie" class="form-label">Série</label>
                                <select class="form-select" id="filtro-serie">
                                    <option value="">Todas</option>
                                    {% for serie in series %}
                                    <option value="{{ serie.id }}">{{ serie.nome }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="filtro-disciplina" class="form-label">Disciplina</label>
                                <select class="form-select" id="filtro-disciplina">
                                    <option value="">Todas</option>
                                    {% for disciplina in disciplinas %}
                                    <option value="{{ disciplina.id }}">{{ disciplina.nome }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="filtro-assunto" class="form-label">Assunto</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="filtro-assunto" placeholder="Digite...">
                                    <button class="btn btn-primary" type="submit">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>

                    <!-- Lista de Questões -->
                    <div id="questoes-disponiveis" class="questoes-container">
                        <!-- Questões serão inseridas aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Questões Selecionadas -->
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h5><i class="bi bi-check2-square me-2"></i>Questões Selecionadas</h5>
                </div>
                <div class="card-body">
                    <div id="questoes-selecionadas" class="questoes-container" ondrop="drop(event)" ondragover="allowDrop(event)">
                        <!-- Questões selecionadas serão inseridas aqui -->
                        <div class="text-center text-muted" id="empty-state">
                            <i class="bi bi-arrow-left-circle" style="font-size: 2rem;"></i>
                            <p class="mt-2">Arraste questões do banco ou clique no botão adicionar</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Visualização -->
<div class="modal fade" id="modalVisualizarQuestao" tabindex="-1" aria-labelledby="modalVisualizarQuestaoLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalVisualizarQuestaoLabel">Visualizar Questão</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="modal-questao">
                    <!-- Conteúdo da questão será inserido aqui -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" id="btnAdicionarQuestaoModal">
                    <i class="bi bi-plus-circle me-2"></i>Adicionar ao Simulado
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Geração Automática -->
<div class="modal fade" id="modalGeracaoAutomatica" tabindex="-1" aria-labelledby="modalGeracaoAutomaticaLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalGeracaoAutomaticaLabel">Gerar Simulado Automaticamente</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="form-geracao-automatica">
                    <div class="mb-3">
                        <label for="quantidade_questoes" class="form-label">Quantidade de Questões</label>
                        <input type="number" class="form-control" id="quantidade_questoes" min="1" max="50" value="10">
                    </div>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle me-2"></i>
                        O sistema selecionará aleatoriamente questões da série e disciplina escolhidas.
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="gerarSimuladoAutomatico()">
                    <i class="bi bi-magic me-2"></i>Gerar Simulado
                </button>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<!-- Bootstrap JS Bundle com Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Variáveis globais
let questaoAtualModal = null;
const questoesSelecionadas = new Set();

// Funções de Drag and Drop
function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev, questao) {
    ev.dataTransfer.setData("text/plain", JSON.stringify(questao));
}

function drop(ev) {
    ev.preventDefault();
    const questaoData = ev.dataTransfer.getData("text/plain");
    const questao = JSON.parse(questaoData);
    adicionarQuestao(questao);
}

// Funções principais
function visualizarQuestao(questao) {
    console.log('Visualizando questão:', questao); // Debug
    questaoAtualModal = questao;
    const modalBody = document.querySelector('.modal-questao');
    modalBody.innerHTML = `
        <div class="questao-preview">
            <h5 class="mb-3">Questão ${questao.id}</h5>
            <div class="mb-4">
                <strong>Enunciado:</strong>
                <p class="mt-2">${questao.questao}</p>
            </div>
            
            <div class="mb-4">
                <strong>Alternativas:</strong>
                <div class="mt-2">
                    <div class="mb-2">
                        <strong>A)</strong> ${questao.alternativa_a}
                    </div>
                    <div class="mb-2">
                        <strong>B)</strong> ${questao.alternativa_b}
                    </div>
                    <div class="mb-2">
                        <strong>C)</strong> ${questao.alternativa_c}
                    </div>
                    <div class="mb-2">
                        <strong>D)</strong> ${questao.alternativa_d}
                    </div>
                    <div class="mb-2">
                        <strong>E)</strong> ${questao.alternativa_e}
                    </div>
                </div>
            </div>
            
            <div class="mb-3">
                <strong>Resposta Correta:</strong> ${questao.questao_correta}
            </div>
            
            <div class="mt-3 text-muted">
                <small>
                    <strong>Disciplina:</strong> ${questao.disciplina_nome} | 
                    <strong>Série:</strong> ${questao.serie_nome} | 
                    <strong>Assunto:</strong> ${questao.assunto}
                </small>
            </div>
        </div>
    `;
    
    // Atualizar o botão de adicionar no modal
    const btnAdicionar = document.getElementById('btnAdicionarQuestaoModal');
    if (questoesSelecionadas.has(questao.id.toString())) {
        btnAdicionar.disabled = true;
        btnAdicionar.innerHTML = '<i class="bi bi-check-circle me-2"></i>Questão já adicionada';
    } else {
        btnAdicionar.disabled = false;
        btnAdicionar.innerHTML = '<i class="bi bi-plus-circle me-2"></i>Adicionar ao Simulado';
    }
    
    // Mostrar o modal
    const modalElement = document.getElementById('modalVisualizarQuestao');
    const modal = new bootstrap.Modal(modalElement);
    modal.show();
}

async function buscarQuestoes() {
    const serie = document.getElementById('filtro-serie').value;
    const disciplina = document.getElementById('filtro-disciplina').value;
    const assunto = document.getElementById('filtro-assunto').value;
    
    // Mostrar mensagem de carregamento
    document.getElementById('questoes-disponiveis').innerHTML = '<div class="text-center"><div class="spinner-border text-primary" role="status"></div><p class="mt-2">Carregando questões...</p></div>';
    
    try {
        const response = await fetch(`/secretaria_educacao/buscar_questoes?serie_id=${serie}&disciplina_id=${disciplina}&assunto=${assunto}`);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const questoes = await response.json();
        
        // Limpar a área de questões disponíveis
        const questoesDisponiveis = document.getElementById('questoes-disponiveis');
        questoesDisponiveis.innerHTML = '';
        
        if (questoes.length === 0) {
            questoesDisponiveis.innerHTML = '<div class="alert alert-info">Nenhuma questão encontrada com os filtros selecionados.</div>';
            return;
        }
        
        // Adicionar cada questão à lista
        questoes.forEach(questao => {
            const questaoElement = document.createElement('div');
            questaoElement.className = 'questao-row border-bottom p-3';
            questaoElement.draggable = true;
            questaoElement.setAttribute('data-questao-id', questao.id);
            questaoElement.ondragstart = (e) => drag(e, questao);
            
            const questaoJSON = JSON.stringify(questao).replace(/"/g, '&quot;');
            questaoElement.innerHTML = `
                <div class="d-flex justify-content-between align-items-start">
                    <div class="flex-grow-1">
                        <strong class="d-block mb-1">
                            Questão ${questao.id}
                            <span class="badge bg-secondary ms-2" title="Número de vezes que esta questão foi usada">
                                <i class="bi bi-repeat"></i> ${questao.total_usos || 0}
                            </span>
                        </strong>
                        <p class="mb-1">${questao.questao.substring(0, 200)}...</p>
                        <small class="text-muted">
                            <strong>Disciplina:</strong> ${questao.disciplina_nome} | 
                            <strong>Série:</strong> ${questao.serie_nome} | 
                            <strong>Assunto:</strong> ${questao.assunto}
                        </small>
                    </div>
                    <div class="ms-3 d-flex gap-2">
                        <button class="btn btn-sm btn-outline-primary" onclick="visualizarQuestao(${questaoJSON})">
                            <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-success" onclick="adicionarQuestao(${questaoJSON})">
                            <i class="bi bi-plus"></i>
                        </button>
                    </div>
                </div>
            `;
            questoesDisponiveis.appendChild(questaoElement);
        });
    } catch (error) {
        console.error('Error:', error);
        document.getElementById('questoes-disponiveis').innerHTML = `
            <div class="alert alert-danger">
                Erro ao carregar questões. Por favor, tente novamente.
            </div>
        `;
    }
}

// Funções auxiliares
function adicionarQuestao(questao) {
    if (questoesSelecionadas.has(questao.id.toString())) {
        mostrarFeedback('Questão já adicionada', 'warning');
        return;
    }
    
    questoesSelecionadas.add(questao.id.toString()); // Convertendo para string para garantir consistência
    
    // Esconde o empty state
    const emptyState = document.getElementById('empty-state');
    if (emptyState) {
        emptyState.style.display = 'none';
    }
    
    const questaoElement = document.createElement('div');
    questaoElement.className = 'questao-selecionada border-bottom p-3';
    questaoElement.setAttribute('data-questao-id', questao.id);
    questaoElement.innerHTML = `
        <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1">
                <strong class="d-block mb-1">Questão ${questao.id}</strong>
                <p class="mb-1">${questao.questao.substring(0, 100)}...</p>
            </div>
            <button class="btn btn-sm btn-outline-danger ms-3" onclick="removerQuestao(${questao.id})">
                <i class="bi bi-trash"></i>
            </button>
        </div>
    `;
    
    document.getElementById('questoes-selecionadas').appendChild(questaoElement);
    atualizarResumo(); // Atualiza o resumo quando adiciona questão
    mostrarFeedback('Questão adicionada com sucesso!', 'success');
}

function removerQuestao(questaoId) {
    questoesSelecionadas.delete(questaoId.toString());
    
    const questoesElement = document.getElementById('questoes-selecionadas');
    const questaoRemover = questoesElement.querySelector(`[data-questao-id="${questaoId}"]`);
    if (questaoRemover) {
        questaoRemover.remove();
    }
    
    // Atualiza o estado do empty-state
    const emptyState = document.getElementById('empty-state');
    if (questoesElement.children.length === 0) {
        emptyState.style.display = 'block';
    }
    
    atualizarResumo(); // Atualiza o resumo quando remove questão
    mostrarFeedback('Questão removida com sucesso!', 'success');
}

function salvarSimulado() {
    const questoesSelecionadas = Array.from(document.getElementById('questoes-selecionadas').children)
        .map(div => div.getAttribute('data-questao-id'));

    // Verifica se há questões selecionadas
    if (questoesSelecionadas.length === 0) {
        mostrarFeedback('Selecione pelo menos uma questão para criar o simulado', 'warning');
        return;
    }
    
    // Verifica se os campos obrigatórios foram preenchidos
    const serie_id = document.getElementById('serie_id').value;
    const mes_id = document.getElementById('mes_id').value;
    const disciplina_id = document.getElementById('disciplina_id').value;
    
    if (!serie_id || !mes_id || !disciplina_id) {
        mostrarFeedback('Por favor, preencha todos os campos obrigatórios', 'warning');
        return;
    }

    const formData = new FormData();
    const simuladoId = document.getElementById('simulado_id').value;
    
    formData.append('simulado_id', simuladoId);
    formData.append('serie_id', serie_id);
    formData.append('disciplina_id', disciplina_id);
    formData.append('mes_id', mes_id);
    
    // Adicionar cada questão individualmente ao FormData
    questoesSelecionadas.forEach(questaoId => {
        formData.append('questoes[]', questaoId);
    });
    
    fetch('/secretaria_educacao/salvar_simulado', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            mostrarFeedback('Simulado salvo com sucesso!', 'success');
            if (!simuladoId) {
                // Se for um novo simulado, redireciona para a página de edição
                window.location.href = `/secretaria_educacao/criar_simulado?id=${data.simulado_id}`;
            }
        } else {
            mostrarFeedback(data.message || 'Erro ao salvar simulado', 'danger');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        mostrarFeedback('Erro ao salvar simulado', 'danger');
    });
}

function mostrarFeedback(mensagem, tipo) {
    const alert = document.createElement('div');
    alert.className = `alert alert-${tipo} alert-dismissible fade show`;
    alert.innerHTML = `
        ${mensagem}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.querySelector('.container-fluid').insertAdjacentElement('afterbegin', alert);
    
    // Remover o alerta após 5 segundos
    setTimeout(() => alert.remove(), 5000);
}

function atualizarResumo() {
    const serie = document.getElementById('serie_id');
    const disciplina = document.getElementById('disciplina_id');
    const mes = document.getElementById('mes_id');
    
    // Atualiza cada elemento individualmente
    document.getElementById('total-questoes').textContent = questoesSelecionadas.size;
    document.getElementById('resumo-serie').textContent = serie.options[serie.selectedIndex]?.text || '-';
    document.getElementById('resumo-disciplina').textContent = disciplina.options[disciplina.selectedIndex]?.text || '-';
    document.getElementById('resumo-mes').textContent = mes.options[mes.selectedIndex]?.text || '-';
}

// Função para pré-carregar questões selecionadas se for edição
function preCarregarQuestoesSelecionadas() {
    {% if questoes_selecionadas %}
        {% for questao in questoes_selecionadas %}
            adicionarQuestao({
                id: {{ questao.id }},
                questao: `{{ questao.questao|safe }}`,
                alternativa_a: `{{ questao.alternativa_a|safe }}`,
                alternativa_b: `{{ questao.alternativa_b|safe }}`,
                alternativa_c: `{{ questao.alternativa_c|safe }}`,
                alternativa_d: `{{ questao.alternativa_d|safe }}`,
                alternativa_e: `{{ questao.alternativa_e|safe }}`,
                questao_correta: `{{ questao.questao_correta }}`,
                assunto: `{{ questao.assunto|safe }}`,
                disciplina_id: {{ questao.disciplina_id }},
                serie_id: {{ questao.serie_id }},
                mes_id: {{ questao.mes_id }}
            });
        {% endfor %}
        atualizarResumo();
    {% endif %}
}

// Função para sincronizar disciplinas
function sincronizarDisciplina(origem, destino) {
    document.getElementById(destino).value = document.getElementById(origem).value;
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    const pesquisaForm = document.getElementById('pesquisa-form');
    const simuladoForm = document.getElementById('simulado-form');
    const questoesDisponiveis = document.getElementById('questoes-disponiveis');
    
    // Event listeners para os campos do simulado
    document.getElementById('serie_id').addEventListener('change', function() {
        atualizarResumo();
        buscarQuestoes();
    });
    
    document.getElementById('disciplina_id').addEventListener('change', function() {
        sincronizarDisciplina('disciplina_id', 'filtro-disciplina');
        atualizarResumo();
        buscarQuestoes();
    });
    
    document.getElementById('mes_id').addEventListener('change', function() {
        atualizarResumo();
        buscarQuestoes();
    });
    
    // Event listeners para os filtros
    document.getElementById('filtro-disciplina').addEventListener('change', function() {
        sincronizarDisciplina('filtro-disciplina', 'disciplina_id');
        atualizarResumo();
        buscarQuestoes();
    });
    
    document.getElementById('filtro-serie').addEventListener('change', buscarQuestoes);
    document.getElementById('filtro-assunto').addEventListener('input', buscarQuestoes);
    
    // Event listener para o botão de adicionar no modal
    document.getElementById('btnAdicionarQuestaoModal').addEventListener('click', function() {
        if (questaoAtualModal) {
            adicionarQuestao(questaoAtualModal);
            const modalElement = document.getElementById('modalVisualizarQuestao');
            const modal = bootstrap.Modal.getInstance(modalElement);
            modal.hide();
        }
    });
    
    // Prevenir o envio do formulário de pesquisa
    pesquisaForm.addEventListener('submit', function(e) {
        e.preventDefault();
        buscarQuestoes();
    });
    
    // Inicialização
    sincronizarDisciplina('disciplina_id', 'filtro-disciplina');
    atualizarResumo();
    buscarQuestoes();
    preCarregarQuestoesSelecionadas();
});

function abrirModalGeracaoAutomatica() {
    // Verificar se série e disciplina foram selecionadas
    const serie_id = document.getElementById('serie_id').value;
    const disciplina_id = document.getElementById('disciplina_id').value;
    
    if (!serie_id || !disciplina_id) {
        mostrarFeedback('Selecione a série e a disciplina antes de gerar automaticamente', 'warning');
        return;
    }
    
    // Abrir o modal
    const modal = new bootstrap.Modal(document.getElementById('modalGeracaoAutomatica'));
    modal.show();
}

async function gerarSimuladoAutomatico() {
    const serie_id = document.getElementById('serie_id').value;
    const disciplina_id = document.getElementById('disciplina_id').value;
    const quantidade = document.getElementById('quantidade_questoes').value;
    
    try {
        const response = await fetch('/secretaria_educacao/gerar_simulado_automatico', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                serie_id: serie_id,
                disciplina_id: disciplina_id,
                quantidade: quantidade
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // Limpar questões selecionadas atuais
            questoesSelecionadas.clear();
            document.getElementById('questoes-selecionadas').innerHTML = '';
            
            // Buscar detalhes de cada questão e adicionar
            for (const questaoId of data.questoes) {
                try {
                    const questaoResponse = await fetch(`/secretaria_educacao/buscar_questao/${questaoId}`);
                    if (!questaoResponse.ok) {
                        throw new Error(`Erro ao buscar questão ${questaoId}`);
                    }
                    const questaoData = await questaoResponse.json();
                    if (questaoData.success && questaoData.questao) {
                        adicionarQuestao(questaoData.questao);
                    } else {
                        console.error('Dados da questão inválidos:', questaoData);
                        mostrarFeedback(`Erro ao carregar questão ${questaoId}`, 'warning');
                    }
                } catch (error) {
                    console.error(`Erro ao buscar questão ${questaoId}:`, error);
                    mostrarFeedback(`Erro ao carregar questão ${questaoId}`, 'warning');
                }
            }
            
            // Fechar o modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('modalGeracaoAutomatica'));
            modal.hide();
            
            mostrarFeedback('Simulado gerado com sucesso!', 'success');
            atualizarResumo(); // Atualiza o resumo após adicionar todas as questões
        } else {
            mostrarFeedback(data.message || 'Erro ao gerar simulado', 'danger');
        }
    } catch (error) {
        console.error('Error:', error);
        mostrarFeedback('Erro ao gerar simulado automaticamente', 'danger');
    }
}

</script>
<style>
.questoes-container {
    min-height: 200px;
    border: 2px dashed #ddd;
    border-radius: 4px;
    padding: 1rem;
    margin-bottom: 1rem;
    position: relative;
}

.questoes-container:empty {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f8f9fa;
}

.questao-row {
    cursor: move;
    background-color: white;
    transition: all 0.2s ease;
}

.questao-row:hover {
    background-color: #f8f9fa;
    transform: translateY(-2px);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.questao-row.dragging {
    opacity: 0.5;
}

#empty-state {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    width: 100%;
    padding: 1rem;
    background-color: #f8f9fa;
    border-radius: 4px;
    display: none;
}

.questoes-container:empty #empty-state {
    display: block;
}
</style>
{% endblock %}
{% endblock %}
