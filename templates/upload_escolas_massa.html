{% extends "base.html" %}

{% block content %}
<h2>Cadastrar Escolas em Massa</h2>
<form method="POST" enctype="multipart/form-data">
    <label for="file">Escolha o arquivo CSV:</label>
    <input type="file" id="file" name="file" accept=".csv" required>
    <br><br>
    <button type="submit">Enviar</button>
</form>

{% if data %}
    <h3>Pré-visualização dos Dados</h3>
    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>CEP</th>
                <th>Estado</th>
                <th>Cidade</th>
                <th>Bairro</th>
                <th>Endereço</th>
                <th>Telefone</th>
                <th>CNPJ</th>
                <th>Diretor</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
                <tr>
                    <td>{{ row['nome'] }}</td>
                    <td>{{ row['cep'] }}</td>
                    <td>{{ row['estado'] }}</td>
                    <td>{{ row['cidade'] }}</td>
                    <td>{{ row['bairro'] }}</td>
                    <td>{{ row['endereco'] }}</td>
                    <td>{{ row['telefone'] }}</td>
                    <td>{{ row['cnpj'] }}</td>
                    <td>{{ row['diretor'] }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <form method="POST">
        <button type="submit">Confirmar Cadastro</button>
    </form>
{% endif %}

{% if error %}
    <div style="color: red; margin-top: 10px;">{{ error }}</div>
{% endif %}
{% if success %}
    <div style="color: green; margin-top: 10px;">{{ success }}</div>
{% endif %}
{% endblock %}
