{% extends "professores/base_professores.html" %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js" defer></script>
<script src="{{ url_for('static', filename='js/banco_questoes.js') }}" defer></script>
<style>
    .questao-preview {
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    .alternativa-input {
        margin-bottom: 0.5rem;
    }
    .btn-remove-alternativa {
        margin-left: 0.5rem;
    }
</style>
{% endblock %}

{% block title %}Banco de Questões{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- Formulário de Cadastro -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Cadastrar Nova Questão</h5>
                </div>
                <div class="card-body">
                    <form id="questao-form">
                        <!-- Disciplina e Assunto -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="disciplina" class="form-label">Disciplina</label>
                                <select class="form-select select2" id="disciplina" required>
                                    <option value="">Selecione...</option>
                                    <option value="matematica">Matemática</option>
                                    <option value="portugues">Português</option>
                                    <option value="historia">História</option>
                                    <option value="geografia">Geografia</option>
                                    <option value="fisica">Física</option>
                                    <option value="quimica">Química</option>
                                    <option value="biologia">Biologia</option>
                                    <option value="ingles">Inglês</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="assunto" class="form-label">Assunto</label>
                                <input type="text" class="form-control" id="assunto" required>
                            </div>
                        </div>

                        <!-- Nível e Tipo -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="nivel" class="form-label">Nível</label>
                                <select class="form-select" id="nivel" required>
                                    <option value="facil">Fácil</option>
                                    <option value="medio">Médio</option>
                                    <option value="dificil">Difícil</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="tipo" class="form-label">Tipo</label>
                                <select class="form-select" id="tipo" required>
                                    <option value="objetiva">Objetiva</option>
                                    <option value="dissertativa">Dissertativa</option>
                                </select>
                            </div>
                        </div>

                        <!-- Enunciado -->
                        <div class="mb-3">
                            <label for="enunciado" class="form-label">Enunciado</label>
                            <textarea class="form-control" id="enunciado" rows="4" required></textarea>
                        </div>

                        <!-- Alternativas (para questões objetivas) -->
                        <div id="alternativas-container" class="mb-3" style="display: none;">
                            <label class="form-label">Alternativas</label>
                            <div id="alternativas-list">
                                <!-- Alternativas serão adicionadas aqui -->
                            </div>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="adicionarAlternativa()">
                                <i class="bi bi-plus-circle"></i> Adicionar Alternativa
                            </button>
                        </div>

                        <!-- Resposta Correta -->
                        <div class="mb-3">
                            <label for="resposta" class="form-label">Resposta Correta</label>
                            <textarea class="form-control" id="resposta" rows="2" required></textarea>
                        </div>

                        <!-- Explicação -->
                        <div class="mb-3">
                            <label for="explicacao" class="form-label">Explicação</label>
                            <textarea class="form-control" id="explicacao" rows="3"></textarea>
                        </div>

                        <!-- Botões -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> Salvar Questão
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="limparFormulario()">
                                <i class="bi bi-eraser"></i> Limpar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Pesquisa de Questões -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Pesquisar Questões</h5>
                </div>
                <div class="card-body">
                    <!-- Filtros -->
                    <form id="pesquisa-form" class="mb-3">
                        <div class="row g-2">
                            <div class="col-md-6">
                                <select class="form-select select2" id="filtro-disciplina">
                                    <option value="">Todas as Disciplinas</option>
                                    <option value="matematica">Matemática</option>
                                    <option value="portugues">Português</option>
                                    <option value="historia">História</option>
                                    <option value="geografia">Geografia</option>
                                    <option value="fisica">Física</option>
                                    <option value="quimica">Química</option>
                                    <option value="biologia">Biologia</option>
                                    <option value="ingles">Inglês</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <input type="text" class="form-control" id="filtro-assunto" placeholder="Assunto">
                            </div>
                        </div>
                        <div class="row g-2 mt-2">
                            <div class="col-md-6">
                                <select class="form-select" id="filtro-nivel">
                                    <option value="">Todos os Níveis</option>
                                    <option value="facil">Fácil</option>
                                    <option value="medio">Médio</option>
                                    <option value="dificil">Difícil</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <select class="form-select" id="filtro-tipo">
                                    <option value="">Todos os Tipos</option>
                                    <option value="objetiva">Objetiva</option>
                                    <option value="dissertativa">Dissertativa</option>
                                </select>
                            </div>
                        </div>
                        <div class="d-grid mt-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-search"></i> Pesquisar
                            </button>
                        </div>
                    </form>

                    <!-- Resultados -->
                    <div id="resultados">
                        <!-- Questões encontradas serão exibidas aqui -->
                    </div>

                    <!-- Paginação -->
                    <nav aria-label="Navegação de páginas" class="mt-3">
                        <ul class="pagination justify-content-center" id="paginacao">
                            <!-- Links de paginação serão adicionados aqui -->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
